# Disable any caching for Node.js app
<IfModule LiteSpeed>
    CacheLookup off
    CacheDisable public /
</IfModule>

# Disable WordPress optimizations
<IfModule mod_headers.c>
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set X-LiteSpeed-Cache-Control "no-cache"
</IfModule>

# Remove query parameters that WordPress plugins add
<IfModule mod_rewrite.c>
    RewriteEngine On

    # Strip WordPress cache parameters
    RewriteCond %{QUERY_STRING} LSCWP_CTRL [NC]
    RewriteRule ^(.*)$ /$1? [R=301,L]

    RewriteCond %{QUERY_STRING} nocache [NC]
    RewriteRule ^(.*)$ /$1? [R=301,L]

    # Proxy to Node.js application
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ http://localhost:3000/$1 [P,L]
</IfModule>
